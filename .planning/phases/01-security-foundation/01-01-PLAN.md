---
phase: 01-security-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - src/index.ts
  - src/lib/token.ts
  - src/lib/wallet.ts
  - src/lib/validation.ts
  - src/utils/constants.ts
  - src/utils/display.ts
  - .env.example
autonomous: true

must_haves:
  truths:
    - "npm install completes without errors"
    - "npm run build compiles TypeScript successfully"
    - "Project structure matches research-recommended layout"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "@solana/spl-token"
    - path: "tsconfig.json"
      provides: "TypeScript configuration for Node.js CLI"
    - path: "src/index.ts"
      provides: "CLI entry point stub"
    - path: "src/lib/token.ts"
      provides: "Token operations module stub"
    - path: "src/lib/wallet.ts"
      provides: "Wallet management module stub"
    - path: "src/lib/validation.ts"
      provides: "Input validation module stub"
    - path: "src/utils/constants.ts"
      provides: "Network constants and defaults"
    - path: "src/utils/display.ts"
      provides: "Output formatting utilities stub"
  key_links:
    - from: "package.json"
      to: "tsconfig.json"
      via: "build script references TypeScript"
      pattern: "tsc"
    - from: "src/index.ts"
      to: "src/lib/*.ts"
      via: "imports from lib modules"
      pattern: "from.*lib/"
---

<objective>
Initialize the TypeScript Node.js project with all dependencies for SPL token creation CLI.

Purpose: Establish project foundation with correct dependencies and structure before implementing token logic. This enables parallel development of token operations and CLI features in subsequent plans.

Output: Working TypeScript project that compiles successfully with all Solana and CLI dependencies installed.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-security-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize TypeScript project with dependencies</name>
  <files>package.json, tsconfig.json, .env.example, .gitignore</files>
  <action>
    Create the project foundation:

    1. Initialize npm project with `npm init -y`

    2. Install core Solana dependencies:
       - @solana/spl-token@0.4.x (SPL token operations)
       - @solana/web3.js@1.x (Solana RPC, NOT v2 - Anchor incompatible)
       - bs58@5.x (Base58 encoding for keypairs)

    3. Install CLI dependencies:
       - commander@12.x (argument parsing)
       - inquirer@10.x (interactive prompts)
       - ora@8.x (progress spinners)
       - chalk@5.x (terminal styling)

    4. Install dev dependencies:
       - typescript@5.x
       - @types/node
       - ts-node (for development)

    5. Create tsconfig.json for Node.js CLI:
       - target: ES2022
       - module: NodeNext
       - moduleResolution: NodeNext
       - outDir: dist
       - strict: true
       - esModuleInterop: true

    6. Add package.json scripts:
       - "build": "tsc"
       - "start": "node dist/index.js"
       - "dev": "ts-node src/index.ts"

    7. Set "type": "module" in package.json (required for ESM imports with chalk/ora)

    8. Create .env.example with:
       - SOLANA_CLUSTER=devnet
       - SOLANA_KEYPAIR_PATH=~/.config/solana/id.json

    9. Update .gitignore to include:
       - node_modules/
       - dist/
       - .env
  </action>
  <verify>
    Run: npm install && npm run build
    Expected: No errors, dist/ folder created (will be empty initially)
  </verify>
  <done>
    - package.json exists with all dependencies listed
    - tsconfig.json configured for Node.js ESM
    - .env.example documents required environment variables
    - npm install completes without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Create project structure with module stubs</name>
  <files>
    src/index.ts
    src/lib/token.ts
    src/lib/wallet.ts
    src/lib/validation.ts
    src/utils/constants.ts
    src/utils/display.ts
  </files>
  <action>
    Create the file structure from research recommendations:

    1. src/index.ts - CLI entry point:
       - Import commander
       - Create basic program with name "memecoin-factory"
       - Add version from package.json
       - Add placeholder "create" command that logs "Token creation coming in Plan 02"
       - Parse process.argv

    2. src/lib/token.ts - Token operations module:
       - Export async function createToken() that throws "Not implemented"
       - Export async function revokeAuthorities() that throws "Not implemented"
       - Export async function verifyAuthorities() that throws "Not implemented"
       - Include JSDoc comments describing what each will do

    3. src/lib/wallet.ts - Wallet management:
       - Export async function loadKeypair(path: string) that throws "Not implemented"
       - Export async function getBalance(connection, publicKey) that throws "Not implemented"
       - Include JSDoc for Solana wallet conventions

    4. src/lib/validation.ts - Input validation:
       - Export function validateName(name: string): boolean - implement (1-32 chars)
       - Export function validateSymbol(symbol: string): boolean - implement (1-10 chars)
       - Export function validateDecimals(decimals: number): boolean - implement (0-9 integer)
       - Export function validateSupply(supply: number): boolean - implement (positive number)
       - These are fully implemented since validation logic is straightforward

    5. src/utils/constants.ts - Network constants:
       - Export DEVNET_URL = "https://api.devnet.solana.com"
       - Export MAINNET_URL = "https://api.mainnet-beta.solana.com"
       - Export LAMPORTS_PER_SOL = 1_000_000_000
       - Export BASE_FEE_LAMPORTS = 5000
       - Export DEFAULT_DECIMALS = 9

    6. src/utils/display.ts - Output formatting:
       - Export function formatSOL(lamports: number): string - implement
       - Export function getExplorerUrl(signature: string, cluster: string): string - implement
       - Export function displaySuccess(message: string): void - stub with chalk
       - Export function displayError(message: string): void - stub with chalk
  </action>
  <verify>
    Run: npm run build
    Expected: TypeScript compiles with no errors, dist/ contains all .js files

    Run: npm run dev -- --help
    Expected: Shows CLI help with "create" command listed
  </verify>
  <done>
    - All source files exist in correct locations
    - Validation functions fully implemented and tested conceptually
    - TypeScript compiles successfully
    - CLI entry point responds to --help
    - Project structure matches research architecture pattern
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Dependency verification:
   ```bash
   npm ls @solana/spl-token @solana/web3.js commander inquirer ora chalk
   ```
   All packages should be listed with versions.

2. Build verification:
   ```bash
   npm run build && ls dist/
   ```
   Should show compiled JS files.

3. CLI verification:
   ```bash
   npm run dev -- --help
   ```
   Should display help text with program name and create command.

4. Structure verification:
   All files exist:
   - src/index.ts
   - src/lib/token.ts, wallet.ts, validation.ts
   - src/utils/constants.ts, display.ts
</verification>

<success_criteria>
Phase 1 Plan 01 is complete when:
- npm install completes without errors
- npm run build compiles TypeScript successfully (no type errors)
- npm run dev -- --help shows CLI help
- All module files exist with proper exports
- Validation functions work correctly (validateName, validateSymbol, validateDecimals, validateSupply)
- Project ready for token implementation in Plan 02
</success_criteria>

<output>
After completion, create `.planning/phases/01-security-foundation/01-01-SUMMARY.md`
</output>
